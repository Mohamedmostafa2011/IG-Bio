<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IG-Bio | Ch 18: Organisms & Environment</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PDF Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            /* Theme: Nature Green for Ecology */
            --primary: #16a34a; /* Green 600 */
            --primary-dark: #14532d; /* Green 900 */
            --accent: #84cc16; /* Lime 500 */
            --bg: #f0fdf4; /* Very light green tint */
            --text: #334155;
            --sidebar-w: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- NAVIGATION BUTTON (Fixed Circular) --- */
        .menu-toggle {
            display: none; /* Hidden on desktop */
            position: fixed; top: 20px; left: 20px; z-index: 3000;
            background: var(--primary); color: white; border: none;
            width: 50px; height: 50px; border-radius: 50%;
            font-size: 1.4rem; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            align-items: center; justify-content: center;
            transition: transform 0.2s;
        }
        .menu-toggle:active { transform: scale(0.9); }

        /* --- MOBILE OVERLAY --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1999;
            opacity: 0; visibility: hidden; transition: 0.3s;
            backdrop-filter: blur(2px);
        }
        .overlay.active { opacity: 1; visibility: visible; }

        /* --- SIDEBAR --- */
        aside {
            width: var(--sidebar-w);
            background: #064e3b; /* Very Dark Emerald */
            color: white;
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            flex-shrink: 0;
            z-index: 2000;
            border-right: 1px solid #065f46;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .brand {
            font-size: 1.5rem; font-weight: 800; color: #86efac; margin-bottom: 40px;
            display: flex; align-items: center; gap: 10px; letter-spacing: -0.5px;
        }

        .nav-item {
            padding: 16px; margin-bottom: 8px; border-radius: 8px;
            cursor: pointer; color: #bbf7d0; font-weight: 600;
            display: flex; align-items: center; gap: 15px; transition: 0.2s;
            border: 1px solid transparent;
        }
        .nav-item:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-item.active { background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(22, 163, 74, 0.4); }

        /* --- MAIN CONTENT --- */
        main { flex: 1; position: relative; overflow: hidden; width: 100%; }

        .view-panel {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            overflow-y: auto; padding: 0; display: none; opacity: 0;
            transition: opacity 0.4s;
        }
        .view-panel.active { display: block; opacity: 1; }

        /* --- TEXTBOOK STYLING --- */
        .paper {
            max-width: 950px; margin: 0 auto; background: white;
            padding: 80px; min-height: 100vh;
            box-shadow: 0 0 40px rgba(0,0,0,0.05);
        }

        h1 { font-family: 'Inter', sans-serif; font-size: 3rem; color: var(--primary-dark); margin-bottom: 10px; letter-spacing: -1px; }
        .meta { color: var(--primary); text-transform: uppercase; font-weight: bold; font-size: 0.8rem; letter-spacing: 1px; }
        
        h2 { 
            font-family: 'Inter', sans-serif; font-size: 1.8rem; color: #064e3b; 
            margin-top: 60px; margin-bottom: 25px; padding-bottom: 15px; 
            border-bottom: 2px solid #bbf7d0; display: flex; align-items: center; gap: 10px;
        }
        
        h3 { font-family: 'Inter', sans-serif; font-size: 1.3rem; color: var(--primary); margin-top: 35px; margin-bottom: 15px; }

        p {
            font-family: 'Crimson Pro', serif; font-size: 1.2rem; line-height: 1.8;
            color: #334155; margin-bottom: 20px;
        }
        li { font-family: 'Crimson Pro', serif; font-size: 1.15rem; line-height: 1.7; margin-bottom: 8px; margin-left: 20px; }
        
        /* Concept Boxes */
        .concept-box {
            background: #f0fdf4; border-left: 5px solid var(--accent);
            padding: 25px; margin: 30px 0; border-radius: 0 8px 8px 0;
        }
        .concept-box strong { color: var(--primary-dark); font-family: 'Inter', sans-serif; }

        .exam-tip {
            background: #fff1f2; border: 1px solid #fda4af; border-radius: 8px;
            padding: 20px; margin: 30px 0; display: flex; gap: 15px; align-items: flex-start;
        }
        .exam-tip i { color: #e11d48; font-size: 1.5rem; margin-top: 3px; }
        .exam-tip strong { color: #be123c; }

        /* Tables */
        .t-wrap { overflow-x: auto; margin: 30px 0; border: 1px solid #bbf7d0; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; min-width: 700px; }
        th { background: #dcfce7; color: var(--primary-dark); padding: 16px; text-align: left; font-family: 'Inter', sans-serif; font-weight: 700; border-bottom: 2px solid #86efac; }
        td { padding: 16px; border-bottom: 1px solid #dcfce7; vertical-align: top; font-family: 'Crimson Pro', serif; font-size: 1.1rem; }
        tr:last-child td { border-bottom: none; }

        /* --- MIND MAP --- */
        .mm-wrapper { padding: 80px; display: inline-flex; min-width: 100%; justify-content: center; background: #f0fdf4; }
        .tree ul { padding-top: 20px; position: relative; display: flex; justify-content: center; }
        .tree li { float: left; text-align: center; list-style-type: none; position: relative; padding: 20px 10px 0 10px; }
        .tree li::before, .tree li::after { content: ''; position: absolute; top: 0; right: 50%; border-top: 2px solid #4ade80; width: 50%; height: 20px; }
        .tree li::after { right: auto; left: 50%; border-left: 2px solid #4ade80; }
        .tree li:only-child::after, .tree li:only-child::before { display: none; } .tree li:only-child { padding-top: 0; }
        .tree li:first-child::before, .tree li:last-child::after { border: 0 none; }
        .tree li:last-child::before { border-right: 2px solid #4ade80; border-radius: 0 5px 0 0; }
        .tree li:first-child::after { border-radius: 5px 0 0 0; }
        .tree ul ul::before { content: ''; position: absolute; top: 0; left: 50%; border-left: 2px solid #4ade80; width: 0; height: 20px; }

        .node {
            background: white; border: 1px solid #84cc16; padding: 12px 18px; border-radius: 8px;
            display: inline-block; min-width: 140px; font-family: 'Inter', sans-serif; font-weight: 600; color: var(--primary-dark);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); position: relative; z-index: 2;
        }
        .root-node { background: var(--primary); color: white; transform: scale(1.1); box-shadow: 0 10px 20px rgba(0,0,0,0.1); border: none; }

        /* --- QUIZ --- */
        .quiz-area { max-width: 900px; margin: 0 auto; padding: 40px 20px; }
        .q-card { background: white; padding: 30px; margin-bottom: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); border: 1px solid #bbf7d0; }
        .q-opt {
            display: flex; align-items: center; gap: 15px; padding: 15px; border: 1px solid #e2e8f0;
            margin-top: 10px; border-radius: 8px; cursor: pointer; transition: 0.2s;
        }
        .q-opt:hover { background: #dcfce7; border-color: #86efac; }
        .q-let { font-weight: 900; color: #94a3b8; background: #f1f5f9; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        
        .q-opt.correct { background: #dcfce7; border-color: #16a34a; }
        .q-opt.correct .q-let { background: #16a34a; color: white; }
        .q-opt.wrong { background: #fee2e2; border-color: #ef4444; }
        .q-opt.wrong .q-let { background: #ef4444; color: white; }

        /* --- MOBILE --- */
        @media (max-width: 768px) {
            .menu-toggle { display: flex; }
            aside { position: fixed; top: 0; left: -100%; height: 100%; width: 85%; box-shadow: 10px 0 30px rgba(0,0,0,0.5); }
            aside.active { left: 0; }
            .paper { padding: 30px 20px; }
            h1 { font-size: 2.2rem; }
            .mm-wrapper { justify-content: flex-start; padding: 40px; }
        }
    </style>
</head>
<body>

    <!-- MENU BUTTON -->
    <button class="menu-toggle" onclick="toggleMenu()">
        <i class="fa-solid fa-bars"></i>
    </button>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <!-- SIDEBAR -->
    <aside id="sidebar">
        <div class="brand"><i class="fa-solid fa-leaf"></i> IG-BIO CH18</div>
        
        <div class="nav-item active" onclick="switchTab('notes', this)">
            <i class="fa-solid fa-book-open"></i> Full Notes
        </div>
        <div class="nav-item" onclick="switchTab('mindmap', this)">
            <i class="fa-solid fa-sitemap"></i> Mind Map
        </div>
        <div class="nav-item" onclick="switchTab('quiz', this)">
            <i class="fa-solid fa-list-check"></i> 50 Qs Quiz
        </div>
        
        <div style="margin-top:auto; padding-top:20px; border-top:1px solid #065f46;">
             <div class="nav-item" onclick="genPDF()" style="color:#86efac; border-color:#065f46;">
                 <i class="fa-solid fa-file-pdf"></i> Save as PDF
             </div>
        </div>
    </aside>

    <main>
        
        <!-- 1. DETAILED NOTES -->
        <div id="notes" class="view-panel active">
            <div class="paper" id="pdf-source">
                <span class="meta">IGCSE Biology 0610 â€¢ Chapter 18</span>
                <h1>Organisms & Environment</h1>
                <p>Ecology is the study of interactions between organisms and their environment. This chapter covers energy flow, nutrient cycles, and population dynamics.</p>

                <h2>1. Key Definitions</h2>
                <div class="t-wrap">
                    <table>
                        <tr><th>Term</th><th>Definition</th></tr>
                        <tr><td><strong>Population</strong></td><td>A group of organisms of one species, living in the same area, at the same time.</td></tr>
                        <tr><td><strong>Community</strong></td><td>All of the populations of different species in an ecosystem.</td></tr>
                        <tr><td><strong>Ecosystem</strong></td><td>A unit containing the community of organisms and their environment, interacting together.</td></tr>
                        <tr><td><strong>Habitat</strong></td><td>The place where an organism lives.</td></tr>
                    </table>
                </div>

                <h2>2. Energy Flow</h2>
                <p>The <strong>Sun</strong> is the principal source of energy input to biological systems. Energy flows through living organisms in a non-cyclical manner (it is eventually lost).</p>

                <h3>Food Chains & Webs</h3>
                <ul>
                    <li><strong>Food Chain:</strong> Shows the transfer of energy from one organism to the next, beginning with a producer.</li>
                    <li><strong>Food Web:</strong> A network of interconnected food chains.</li>
                    <li><strong>Producer:</strong> Organism that makes its own organic nutrients using sunlight (photosynthesis).</li>
                    <li><strong>Consumer:</strong> Organism that gets energy by feeding on others.</li>
                    <li><strong>Decomposer:</strong> Organism that gets energy from dead/waste organic matter.</li>
                </ul>

                <div class="exam-tip">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    <div>
                        <strong>Arrows:</strong> In food chains, arrows represent the <strong>direction of energy flow</strong>, not who eats whom. E.g., Grass &rarr; Rabbit (Energy goes from grass to rabbit).
                    </div>
                </div>

                <h3>Energy Loss (The 10% Rule)</h3>
                <p>Energy is lost at each trophic level. Only about 10% is passed to the next level. Energy is lost via:</p>
                <ol>
                    <li><strong>Heat:</strong> Generated during respiration.</li>
                    <li><strong>Movement:</strong> Muscle contraction uses energy.</li>
                    <li><strong>Excretion:</strong> Energy remains in faeces/urine.</li>
                    <li><strong>Uneaten parts:</strong> Roots, bones, or fur may not be eaten.</li>
                </ol>
                <p>This explains why food chains rarely have more than 4 or 5 trophic levels; there isn't enough energy left at the top.</p>

                <h2>3. Pyramids</h2>
                <div class="t-wrap">
                    <table>
                        <tr><th>Type</th><th>Description</th><th>Shape</th></tr>
                        <tr><td><strong>Pyramid of Numbers</strong></td><td>Shows the number of organisms at each level.</td><td>Can be inverted (e.g., 1 Oak Tree feeding many aphids).</td></tr>
                        <tr><td><strong>Pyramid of Biomass</strong></td><td>Shows the dry mass of living material at each level.</td><td><strong>Always</strong> upright (pyramid shape).</td></tr>
                        <tr><td><strong>Pyramid of Energy</strong></td><td>Shows total energy at each level.</td><td>Always upright.</td></tr>
                    </table>
                </div>

                <h2>4. Nutrient Cycles</h2>
                <p>Unlike energy, nutrients (chemicals) are recycled within an ecosystem.</p>

                <h3>The Carbon Cycle</h3>
                <ul>
                    <li><strong>Photosynthesis:</strong> Plants remove CO<sub>2</sub> from the atmosphere to make carbohydrates.</li>
                    <li><strong>Respiration:</strong> Plants, animals, and decomposers release CO<sub>2</sub> back into the atmosphere.</li>
                    <li><strong>Decomposition:</strong> Bacteria/Fungi break down dead matter, releasing CO<sub>2</sub>.</li>
                    <li><strong>Combustion:</strong> Burning fossil fuels releases stored carbon as CO<sub>2</sub>.</li>
                </ul>

                <h3>The Water Cycle</h3>
                <ul>
                    <li><strong>Evaporation:</strong> Water turns to vapor from oceans/lakes.</li>
                    <li><strong>Transpiration:</strong> Water vapor loss from plant leaves (stomata).</li>
                    <li><strong>Condensation:</strong> Vapor cools to form clouds.</li>
                    <li><strong>Precipitation:</strong> Rain/Snow falls to Earth.</li>
                </ul>

                <h3>The Nitrogen Cycle</h3>
                <p>Nitrogen is needed to make proteins (amino acids) and DNA. Plants cannot use nitrogen gas (N<sub>2</sub>) directly.</p>
                <div class="concept-box">
                    <strong>Nitrogen Fixation:</strong> Turning N<sub>2</sub> gas into Nitrates (NO<sub>3</sub><sup>-</sup>).<br>
                    1. <strong>Lightning:</strong> Energy combines N and O.<br>
                    2. <strong>Nitrogen-Fixing Bacteria:</strong> Found in soil and root nodules of legumes (peas/beans).
                </div>
                <ul>
                    <li><strong>Decomposition (Ammonification):</strong> Proteins in dead matter &rarr; Ammonia.</li>
                    <li><strong>Nitrification:</strong> Nitrifying bacteria turn Ammonia &rarr; Nitrites &rarr; Nitrates.</li>
                    <li><strong>Denitrification:</strong> Denitrifying bacteria (in waterlogged soil) turn Nitrates &rarr; Nitrogen Gas (N<sub>2</sub>). This is bad for soil fertility.</li>
                </ul>

                <h2>5. Population Growth</h2>
                <p>A population growing in an environment with limited resources follows a <strong>Sigmoid (S-shaped) Curve</strong>.</p>
                
                <ol>
                    <li><strong>Lag Phase:</strong> Slow growth. Organisms adapting/reproducing slowly.</li>
                    <li><strong>Log (Exponential) Phase:</strong> Rapid growth. Birth rate > Death rate. No limiting factors yet.</li>
                    <li><strong>Stationary Phase:</strong> Population stabilizes. Birth rate = Death rate. Limiting factors apply (food shortage, disease, space).</li>
                    <li><strong>Death Phase:</strong> Population decreases. Death rate > Birth rate (toxic waste build-up, food gone).</li>
                </ol>

                <h3>Factors Affecting Population Size</h3>
                <ul>
                    <li><strong>Food Supply:</strong> More food = higher population.</li>
                    <li><strong>Predation:</strong> More predators = lower prey population.</li>
                    <li><strong>Disease:</strong> Spread increases in dense populations.</li>
                </ul>

                <div style="height:100px;"></div>
            </div>
        </div>

        <!-- 2. MIND MAP -->
        <div id="mindmap" class="view-panel">
            <div class="mm-wrapper">
                <div class="tree">
                    <ul>
                        <li>
                            <div class="node root-node">ECOLOGY</div>
                            <ul>
                                <li>
                                    <div class="node">Energy Flow</div>
                                    <ul>
                                        <li><div class="node">Sun Source</div></li>
                                        <li><div class="node">Food Chains</div></li>
                                        <li><div class="node">10% Rule</div></li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="node">Pyramids</div>
                                    <ul>
                                        <li><div class="node">Of Numbers</div></li>
                                        <li><div class="node">Of Biomass</div></li>
                                        <li><div class="node">Trophic Levels</div></li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="node">Carbon Cycle</div>
                                    <ul>
                                        <li><div class="node">Photosynthesis</div></li>
                                        <li><div class="node">Respiration</div></li>
                                        <li><div class="node">Combustion</div></li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="node">Nitrogen Cycle</div>
                                    <ul>
                                        <li><div class="node">Fixation</div></li>
                                        <li><div class="node">Nitrification</div></li>
                                        <li><div class="node">Denitrification</div></li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="node">Populations</div>
                                    <ul>
                                        <li><div class="node">Lag/Log Phase</div></li>
                                        <li><div class="node">Stationary</div></li>
                                        <li><div class="node">Limiting Factors</div></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 3. QUIZ -->
        <div id="quiz" class="view-panel">
            <div class="quiz-area" id="q-container">
                <!-- Questions injected via JS -->
            </div>
        </div>

    </main>

    <script>
        // --- UI LOGIC ---
        function toggleMenu() {
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('overlay');
            if(sb.style.left === '0px') {
                sb.style.left = '-100%';
                ov.classList.remove('active');
            } else {
                sb.style.left = '0px';
                ov.classList.add('active');
            }
        }

        function switchTab(id, btn) {
            document.querySelectorAll('.view-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            if(window.innerWidth <= 768) {
                document.getElementById('sidebar').style.left = '-100%';
                document.getElementById('overlay').classList.remove('active');
            }
        }

        function genPDF() {
            const { jsPDF } = window.jspdf;
            const element = document.getElementById('pdf-source');
            const origWidth = element.style.width;
            element.style.width = '900px'; 
            
            html2canvas(element, { scale: 2 }).then(canvas => {
                element.style.width = origWidth;
                const img = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const w = 210; const h = 297;
                const imgH = canvas.height * w / canvas.width;
                let hLeft = imgH; let pos = 0;

                pdf.addImage(img, 'PNG', 0, pos, w, imgH);
                hLeft -= h;
                while (hLeft >= 0) {
                    pos = hLeft - imgH;
                    pdf.addPage();
                    pdf.addImage(img, 'PNG', 0, pos, w, imgH);
                    hLeft -= h;
                }
                pdf.save('IG_Bio_Ch18_Ecology.pdf');
            });
        }

        // --- 50 QUESTIONS (Organisms & Environment) ---
        const qData = [
            {q:"What is the principal source of energy for biological systems?", o:["The Moon","Geothermal heat","The Sun","Wind"], a:2},
            {q:"A group of organisms of one species living in the same area is a?", o:["Community","Population","Ecosystem","Habitat"], a:1},
            {q:"All the populations of different species in an area make up a?", o:["Community","Population","Species","Kingdom"], a:0},
            {q:"What do the arrows in a food chain represent?", o:["Who eats who","Direction of energy flow","Size of organism","Speed of eating"], a:1},
            {q:"Organisms that make their own nutrients using light are called?", o:["Consumers","Decomposers","Producers","Herbivores"], a:2},
            {q:"An organism that gets its energy by feeding on other organisms is a?", o:["Producer","Consumer","Plant","Autotroph"], a:1},
            {q:"Animals that eat only plants are called?", o:["Carnivores","Omnivores","Herbivores","Detritivores"], a:2},
            {q:"Animals that eat only other animals are called?", o:["Carnivores","Omnivores","Herbivores","Producers"], a:0},
            {q:"Approximately what percentage of energy is passed from one trophic level to the next?", o:["100%","90%","50%","10%"], a:3},
            {q:"Energy is lost between trophic levels primarily as?", o:["Heat","Light","Sound","Electricity"], a:0},
            {q:"Which pyramid is always upright (broad base)?", o:["Pyramid of Numbers","Pyramid of Biomass","Pyramid of Age","Inverted Pyramid"], a:1},
            {q:"What does a Pyramid of Numbers show?", o:["The weight of organisms","The energy content","The number of individuals","The growth rate"], a:2},
            {q:"Why are food chains usually limited to 4 or 5 levels?", o:["Not enough space","Not enough energy remains","Animals get too big","Predators die out"], a:1},
            {q:"What process removes Carbon Dioxide from the atmosphere?", o:["Respiration","Combustion","Photosynthesis","Decomposition"], a:2},
            {q:"What process releases energy from food and produces CO2?", o:["Photosynthesis","Respiration","Transpiration","Growth"], a:1},
            {q:"Burning fossil fuels is known as?", o:["Combustion","Respiration","Decay","Fixation"], a:0},
            {q:"Decomposers are mainly?", o:["Plants & Algae","Bacteria & Fungi","Insects & Birds","Viruses & Prions"], a:1},
            {q:"Water loss from plant leaves is called?", o:["Evaporation","Precipitation","Transpiration","Condensation"], a:2},
            {q:"In the water cycle, water vapor cooling to form clouds is?", o:["Evaporation","Condensation","Precipitation","Transpiration"], a:1},
            {q:"Which gas makes up 78% of the atmosphere but cannot be used directly by plants?", o:["Oxygen","Carbon Dioxide","Nitrogen","Hydrogen"], a:2},
            {q:"Nitrogen fixation turns Nitrogen gas into?", o:["Ammonia/Nitrates","Oxygen","Proteins","DNA"], a:0},
            {q:"Where do nitrogen-fixing bacteria live?", o:["In the air","In root nodules of legumes","In the leaves","In the stomach"], a:1},
            {q:"Which process turns ammonia into nitrates?", o:["Nitrification","Denitrification","Fixation","Combustion"], a:0},
            {q:"Denitrifying bacteria turn nitrates into?", o:["Protein","Nitrogen gas","Ammonia","Oxygen"], a:1},
            {q:"In which soil condition does denitrification happen most?", o:["Dry, aerated soil","Sandy soil","Waterlogged (anaerobic) soil","Frozen soil"], a:2},
            {q:"Proteins in dead organisms are broken down into ammonia by?", o:["Decomposition","Nitrification","Photosynthesis","Transpiration"], a:0},
            {q:"The curve showing population growth is typically?", o:["Linear","Sigmoid (S-shaped)","J-shaped","Flat"], a:1},
            {q:"The phase where population grows slowly while adapting is?", o:["Log phase","Lag phase","Stationary phase","Death phase"], a:1},
            {q:"The phase of rapid, exponential growth is?", o:["Log phase","Lag phase","Stationary phase","Death phase"], a:0},
            {q:"In the Stationary phase, birth rate is equal to?", o:["Growth rate","Death rate","Zero","Exponential rate"], a:1},
            {q:"Which is a limiting factor for population growth?", o:["Unlimited food","No predators","Disease","Good weather"], a:2},
            {q:"An organism feeding at the 3rd trophic level is a?", o:["Primary consumer","Secondary consumer","Producer","Tertiary consumer"], a:1},
            {q:"Primary consumers are usually?", o:["Carnivores","Herbivores","Decomposers","Plants"], a:1},
            {q:"Secondary consumers feed on?", o:["Producers","Primary consumers","Tertiary consumers","Decomposers"], a:1},
            {q:"A network of interconnected food chains is a?", o:["Food web","Ecosystem","Community","Habitat"], a:0},
            {q:"Carbon is returned to the air by decomposers via?", o:["Photosynthesis","Respiration","Eating","Combustion"], a:1},
            {q:"Which of these contains carbon?", o:["Water","Carbohydrates","Salt","Oxygen gas"], a:1},
            {q:"What happens to energy that is NOT passed to the next level?", o:["It is destroyed","It is lost to the environment","It is recycled","It turns into matter"], a:1},
            {q:"Which organisms fix nitrogen via lightning?", o:["None, lightning is abiotic","Bacteria","Fungi","Trees"], a:0},
            {q:"Legumes include plants like?", o:["Grass","Oak trees","Peas and Beans","Roses"], a:2},
            {q:"Why do farmers plow/aerate the soil?", o:["To encourage denitrification","To encourage nitrification (requires oxygen)","To kill worms","To compact it"], a:1},
            {q:"Over-population can lead to?", o:["More resources","Competition for resources","Cleaner water","Less disease"], a:1},
            {q:"Biomass refers to?", o:["Total weight of water","Dry mass of living matter","Number of animals","Energy in joules"], a:1},
            {q:"Which is NOT a way carbon enters the atmosphere?", o:["Respiration","Combustion","Photosynthesis","Decomposition"], a:2},
            {q:"Plants need nitrates to make?", o:["Starch","Glucose","Amino acids (Proteins)","Fats"], a:2},
            {q:"Which phase follows the stationary phase if resources run out?", o:["Lag phase","Log phase","Death phase","Growth phase"], a:2},
            {q:"An example of a producer is?", o:["Grass","Cow","Lion","Fungi"], a:0},
            {q:"Energy flow is?", o:["Cyclical","Linear (one-way)","Reversible","Random"], a:1},
            {q:"Nutrients are?", o:["Lost forever","Recycled","Created","Destroyed"], a:1},
            {q:"A unit containing a community and its environment is an?", o:["Ecosystem","Population","Species","Family"], a:0}
        ];

        const qDiv = document.getElementById('q-container');
        const lets = ['A','B','C','D'];

        qData.forEach((q, idx) => {
            let opts = q.o.map((txt, i) => ({txt, i}));
            // Shuffle options
            opts.sort(() => Math.random() - 0.5);

            const card = document.createElement('div');
            card.className = 'q-card';
            card.innerHTML = `
                <h3 style="margin:0 0 15px 0; font-size:1.1rem; color:#334155;">${idx+1}. ${q.q}</h3>
                ${opts.map((o, k) => `
                    <div class="q-opt" onclick="check(${idx}, ${o.i}, this)">
                        <div class="q-let">${lets[k]}</div>
                        <div>${o.txt}</div>
                    </div>
                `).join('')}
            `;
            qDiv.appendChild(card);
        });

        function check(qIdx, oIdx, el) {
            const parent = el.parentElement;
            if(parent.classList.contains('locked')) return;
            parent.classList.add('locked');

            if(oIdx === qData[qIdx].a) {
                el.classList.add('correct');
            } else {
                el.classList.add('wrong');
                const text = qData[qIdx].o[qData[qIdx].a];
                for(let child of parent.children) {
                    if(child.innerText.includes(text)) child.classList.add('correct');
                }
            }
        }
    </script>
</body>
</html>
