<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG-bio | The Ultimate IGCSE Biology Resource</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* Brand Colors */
            --primary: #2563eb; /* Royal Blue */
            --primary-dark: #1e40af;
            --accent: #f59e0b; /* Amber */
            --success: #10b981;
            --bg: #f8fafc;
            --surface: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        /* --- Hero Section --- */
        header {
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
            color: white;
            padding: 5rem 1rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* Decorative circle in background */
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -20%;
            width: 600px;
            height: 600px;
            background: rgba(255,255,255,0.05);
            border-radius: 50%;
            z-index: 0;
        }

        .hero-content { position: relative; z-index: 1; max-width: 800px; margin: 0 auto; }

        header h1 {
            font-size: 4rem;
            font-weight: 800;
            letter-spacing: -2px;
            margin-bottom: 1rem;
            background: linear-gradient(to right, #fff, #93c5fd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        header p {
            font-size: 1.3rem;
            color: #cbd5e1;
            margin-bottom: 2rem;
            font-family: 'Lora', serif;
        }

        .cta-btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 15px 35px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: 0.3s;
            border: 2px solid transparent;
        }

        .cta-btn:hover {
            background: transparent;
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        /* --- Features Section --- */
        .features {
            max-width: 1200px;
            margin: -50px auto 3rem auto; /* Overlap header */
            padding: 0 1rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .feature-card {
            background: var(--surface);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            text-align: center;
            transition: 0.3s;
            border-top: 5px solid var(--primary);
        }

        .feature-card:hover { transform: translateY(-10px); box-shadow: 0 20px 30px -10px rgba(0,0,0,0.15); }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .feature-card h3 { margin-bottom: 0.5rem; color: var(--primary-dark); }
        .feature-card p { font-size: 0.95rem; color: var(--text-light); }

        /* --- Chapter Grid Section --- */
        .chapters-section {
            max-width: 1200px;
            margin: 4rem auto;
            padding: 0 1rem;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-header h2 { font-size: 2.5rem; color: var(--text); margin-bottom: 10px; }
        .section-header p { color: var(--text-light); font-size: 1.1rem; }

        /* Search Bar */
        .search-container {
            max-width: 500px;
            margin: 0 auto 3rem auto;
            position: relative;
        }
        
        .search-bar {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border-radius: 50px;
            border: 2px solid #e2e8f0;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            transition: 0.3s;
        }
        
        .search-bar:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        .search-icon { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: #94a3b8; }

        /* Grid */
        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .chapter-card {
            background: var(--surface);
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            text-decoration: none;
            color: var(--text);
            display: flex;
            flex-direction: column;
            transition: 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .chapter-card:hover {
            border-color: var(--primary);
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.1);
        }

        .chapter-num {
            font-size: 0.8rem;
            font-weight: 800;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .chapter-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }

        .chapter-icon {
            align-self: flex-end;
            font-size: 1.5rem;
            color: var(--bg); /* Hidden initially */
            background: var(--primary);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-top: auto;
            transition: 0.3s;
        }

        .chapter-card:hover .chapter-icon { background: var(--primary-dark); }

        /* Footer */
        footer {
            background: #0f172a;
            color: #94a3b8;
            text-align: center;
            padding: 3rem 1rem;
            margin-top: 5rem;
        }
        
        footer p { font-size: 0.9rem; }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 { font-size: 2.5rem; }
            .features { grid-template-columns: 1fr; margin-top: 2rem; }
        }

                /* Sticky Navigation Bar */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            padding: 1rem;
            display: flex;
            justify-content: center;
        }

        nav ul {
            display: flex;
            gap: 30px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav a {
            text-decoration: none;
            color: var(--text);
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        nav a:hover { color: var(--primary); transform: translateY(-2px); }

        /* Hero Buttons Layout */
        .hero-btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        /* Button Colors */
        .btn-topics { background: var(--accent); border-color: var(--accent); }
        .btn-topics:hover { color: var(--accent); background: transparent; }
        
        .btn-games { background: var(--success); border-color: var(--success); }
        .btn-games:hover { color: var(--success); background: transparent; }
        
	/* --- AUTH MODAL --- */
#authModal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
    z-index: 2000; display: none; justify-content: center; align-items: center;
}

.auth-box {
    background: white; padding: 2rem; border-radius: 15px;
    width: 100%; max-width: 400px; text-align: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

.auth-input {
    width: 100%; padding: 12px; margin: 10px 0;
    border: 2px solid #e2e8f0; border-radius: 8px; font-family: inherit;
}

/* --- USER DASHBOARD --- */
#userDashboard {
    background: white; padding: 20px; margin: 20px auto; max-width: 1200px;
    border-radius: 12px; border-left: 5px solid var(--success);
    display: none; /* Hidden until logged in */
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    justify-content: space-between; align-items: center;
}

.progress-container { flex: 1; margin: 0 20px; }
.progress-bar-bg { width: 100%; height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--success); width: 0%; transition: 0.5s; }

/* --- PROGRESS CHECKBOX ON CARDS --- */
.chapter-card { position: relative; } /* Ensure parent is relative */

.progress-check {
    position: absolute; top: 15px; right: 15px;
    width: 25px; height: 25px; cursor: pointer;
    accent-color: var(--success); z-index: 10;
    transform: scale(1.5);
}

    </style>
</head>
<body>

    <nav>
        <ul>
            <li><a href="#chapters"><i class="fa-solid fa-book"></i> Chapters</a></li>
            <li><a href="#general-topics"><i class="fa-solid fa-layer-group"></i> General Topics</a></li>
            <li><a href="#edu-games"><i class="fa-solid fa-gamepad"></i> Edu-Games</a></li>
            <li><a href="#" onclick="openAuth()" id="navAuthBtn" style="color:var(--primary);">Sign In</a></li>
        </ul>
    </nav>
    
    <!-- HERO SECTION -->
    <header>
<!-- USER DASHBOARD (Visible only when logged in) -->
<div id="userDashboard">
    <div>
        <h3 id="welcomeMsg" style="margin:0;">Welcome back!</h3>
        <small style="color:#64748b;">Keep track of your revision.</small>
    </div>
    <div class="progress-container">
        <div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:5px;">
            <span>Progress</span>
            <span id="progressText">0%</span>
        </div>
        <div class="progress-bar-bg">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>
    <button onclick="logout()" style="background:#ef4444; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">Log Out</button>
</div>

<!-- AUTH MODAL POPUP -->
<div id="authModal">
    <div class="auth-box">
        <h2 id="authTitle" style="color:var(--text);">Sign In</h2>
        <input type="text" id="username" class="auth-input" placeholder="Username">
        <input type="password" id="password" class="auth-input" placeholder="Password">
        
        <button onclick="handleAuthAction()" class="cta-btn" style="width:100%; margin-top:10px;" id="authActionBtn">Login</button>
        
        <p style="margin-top:15px; font-size:0.9rem; cursor:pointer; color:var(--primary);" onclick="toggleAuthMode()" id="authToggle">
            Need an account? Create one
        </p>
        <p style="margin-top:10px; font-size:0.8rem; color:red; display:none;" id="authError"></p>
        <button onclick="closeAuth()" style="background:transparent; border:none; color:#999; margin-top:10px; cursor:pointer;">Close</button>
    </div>
</div>
        <div class="hero-content">
            <h1>IG-bio</h1>
            <p>The Ultimate A* Guide for CIE 0610 Biology. <br>Audio Lectures, Smart Notes, Mind Maps & Quizzes for every chapter.</p>
            
            <div class="hero-btn-group">
                <a href="#chapters" class="cta-btn">
                    <i class="fa-solid fa-book"></i> Chapters
                </a>
                <a href="#general-topics" class="cta-btn btn-topics">
                    <i class="fa-solid fa-layer-group"></i> General Topics
                </a>
                <a href="#edu-games" class="cta-btn btn-games">
                    <i class="fa-solid fa-gamepad"></i> Edu-Games
                </a>
            </div>
        </div>
    </header>

    <!-- FEATURES SECTION -->
    <div class="features">
        <div class="feature-card">
            <i class="fa-solid fa-headphones feature-icon"></i>
            <h3>Audio Lectures</h3>
            <p>Listen to detailed explanations of complex concepts. Download transcripts as PDFs for offline revision.</p>
        </div>
        <div class="feature-card" style="border-top-color: #10b981;">
            <i class="fa-solid fa-book-open feature-icon" style="color: #10b981;"></i>
            <h3>Smart Notes</h3>
            <p>Concise, bullet-pointed notes focusing on key syllabus definitions. Downloadable as topic-specific PDFs.</p>
        </div>
        <div class="feature-card" style="border-top-color: #f59e0b;">
            <i class="fa-solid fa-sitemap feature-icon" style="color: #f59e0b;"></i>
            <h3>Visual Mind Maps</h3>
            <p>High-resolution visual hierarchies to help you memorize connections. Scrollable and downloadable.</p>
        </div>
        <div class="feature-card" style="border-top-color: #ef4444;">
            <i class="fa-solid fa-clipboard-check feature-icon" style="color: #ef4444;"></i>
            <h3>Exam Quizzes</h3>
            <p>50-question MCQ challenges for every chapter with instant feedback and detailed model answers.</p>
        </div>
    </div>

    <!-- CHAPTERS GRID -->
    <section class="chapters-section" id="chapters">
        <div class="section-header">
            <h2>Course Content</h2>
            <p>Select a chapter to begin your mastery.</p>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass search-icon"></i>
            <input type="text" id="searchInput" class="search-bar" placeholder="Search for a topic (e.g., Enzymes, Plants)..." onkeyup="filterChapters()">
        </div>

        <div class="chapter-grid" id="grid">
            
            <!-- 1 -->
            <a href="1.Classification of Living Organisms .html" class="chapter-card">
                <input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch1')">
	        <div class="chapter-num">Chapter 1</div>
                <div class="chapter-title">Characteristics of Living Organisms</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 2 -->
            <a href="2.Organisation of the organisms.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch2')">
		<div class="chapter-num">Chapter 2</div>
                <div class="chapter-title">Organization of the Organism</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 3 -->
            <a href="3.Movements in & out of cells.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch3')">
                <div class="chapter-num">Chapter 3</div>
                <div class="chapter-title">Movement In & Out of Cells</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 4 -->
            <a href="4.Biological Molecules.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch4')">
                <div class="chapter-num">Chapter 4</div>
                <div class="chapter-title">Biological Molecules</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 5 -->
            <a href="5.Enzymes.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch5')">
                <div class="chapter-num">Chapter 5</div>
                <div class="chapter-title">Enzymes</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 6 -->
            <a href="6.Plant Nutrition.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch6')">
                <div class="chapter-num">Chapter 6</div>
                <div class="chapter-title">Plant Nutrition</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 7 -->
            <a href="7.Human Nutrition.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch7')">
                <div class="chapter-num">Chapter 7</div>
                <div class="chapter-title">Human Nutrition</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 8 -->
            <a href="8.Transport in Plants.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch8')">
                <div class="chapter-num">Chapter 8</div>
                <div class="chapter-title">Transport in Plants</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 9 -->
            <a href="9.Transport in humans.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch9')">
                <div class="chapter-num">Chapter 9</div>
                <div class="chapter-title">Transport in Animals</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 10 -->
            <a href="10.Disease and Immunity.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch10')">
                <div class="chapter-num">Chapter 10</div>
                <div class="chapter-title">Diseases and Immunity</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 11 -->
            <a href="11.Respiration and Gas Exchange.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch11')">
                <div class="chapter-num">Chapter 11</div>
                <div class="chapter-title">Gas Exchange and Respiration</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 12 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch12')">
                <div class="chapter-num">Chapter 12</div>
                <div class="chapter-title">Coordination and Response</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 13 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch13')">
                <div class="chapter-num">Chapter 13</div>
                <div class="chapter-title">Excretion And Homeostasis</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 14 -->
            <a href="14.Reproduction In Plants.html" class="chapter-card">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch14')">
                <div class="chapter-num">Chapter 14</div>
                <div class="chapter-title">Reproduction In Plants</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 15 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch15')">
                <div class="chapter-num">Chapter 15</div>
                <div class="chapter-title">Reproduction In Humans</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 16 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch16')">
                <div class="chapter-num">Chapter 16</div>
                <div class="chapter-title">Chromosomes, Genes and Proteins</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 17 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch17')">
                <div class="chapter-num">Chapter 17</div>
                <div class="chapter-title">Variation and Selection</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 18 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch18')">
                <div class="chapter-num">Chapter 18</div>
                <div class="chapter-title">Organisms and their Environment</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 19 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch19')">
                <div class="chapter-num">Chapter 19</div>
                <div class="chapter-title">Human Influences on Ecosystems</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <!-- 20 -->
            <a href="#" class="chapter-card" onclick="alert('This chapter is under construction!'); return false;">
		<input type="checkbox" class="progress-check" onclick="handleCheckboxClick(event, this, 'ch20')">
                <div class="chapter-num">Chapter 20</div>
                <div class="chapter-title">Biotechnology & Genetic Modification </div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>
            
        </div>
    </section>

    <!-- DIVIDER -->
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 1rem;">
        <hr style="border: 0; height: 1px; background: #e2e8f0; margin: 4rem 0;">
    </div>

    <!-- GENERAL TOPICS SECTION -->
    <section class="chapters-section" id="general-topics">
        <div class="section-header">
            <h2>General Topics</h2>
            <p>Additional resources and broader biological concepts.</p>
        </div>

        <!-- Search Bar for Topics -->
        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass search-icon"></i>
            <input type="text" id="topicSearchInput" class="search-bar" placeholder="Search general topics..." onkeyup="filterTopics()">
        </div>

        <div class="chapter-grid" id="topicGrid">

            <a href="specialised cells.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">Specialised Cells</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>
            
            <a href="smoking.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">Smoking</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>
            
            <a href="CHD.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">CHD</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

            <a href="Blood.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">Blood</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>

                        <a href="defense.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">Defense Against Diseases</div>
                <div class="chapter-icon"><i class="fa-solid fa-chevron-right"></i></div>
            </a>
            
        </div>
    </section>

    <!-- DIVIDER -->
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 1rem;">
        <hr style="border: 0; height: 1px; background: #e2e8f0; margin: 4rem 0;">
    </div>

    <!-- EDU-GAMES SECTION -->
    <section class="chapters-section" id="edu-games">
        <div class="section-header">
            <h2>Edu-Games</h2>
            <p>Interactive simulations to master complex topics.</p>
        </div>

        <!-- Search Bar for Games -->
        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass search-icon"></i>
            <input type="text" id="gameSearchInput" class="search-bar" placeholder="Search games..." onkeyup="filterGames()">
        </div>

        <div class="chapter-grid" id="gameGrid">
            
            <!-- GAME TEMPLATE BOX (Copy and paste to add more) -->
            <a href="game1.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">Classification Of Living Organism</div>
                <div class="chapter-icon"><i class="fa-solid fa-gamepad"></i></div>
            </a>

            <a href="game2.html" class="chapter-card">
                <div class="chapter-title" style="margin-top: auto; margin-bottom: auto;">Organisation Of The Organism</div>
                <div class="chapter-icon"><i class="fa-solid fa-gamepad"></i></div>
            </a>
            
        </div>
    </section>
    
    <footer>
        <p>&copy; 2026 IG-bio. Designed for CIE IGCSE Syllabus 0610.</p>
        <p style="font-size:0.8rem; opacity:0.7; margin-top:10px;">Content is for educational purposes. Ensure to cross-reference with official syllabus guides.</p>
    </footer>

    <script>
// --- AUTH SYSTEM ---
let currentUser = null;
let isSignupMode = false;

// 1. FORCE LOGIN ON LOAD
window.onload = function() {
    // Initialize DB if needed
    if (!localStorage.getItem('IGBIO_DB')) {
        localStorage.setItem('IGBIO_DB', JSON.stringify({}));
    }

    // Check session
    const sessionUser = localStorage.getItem('IGBIO_Session');
    
    if(sessionUser) {
        loginUser(sessionUser);
    } else {
        // ALWAYS SHOW LOGIN SCREEN IF NOT LOGGED IN
        openAuth();
    }
};

// --- MODAL FUNCTIONS ---
function openAuth() { document.getElementById('authModal').style.display = 'flex'; }
function closeAuth() { document.getElementById('authModal').style.display = 'none'; }

function toggleAuthMode() {
    isSignupMode = !isSignupMode;
    document.getElementById('authTitle').innerText = isSignupMode ? "Create Account" : "Sign In";
    document.getElementById('authActionBtn').innerText = isSignupMode ? "Sign Up" : "Login";
    document.getElementById('authToggle').innerText = isSignupMode ? "Have an account? Login" : "Need an account? Create one";
    document.getElementById('authError').style.display = 'none';
}

// --- LOGIN LOGIC ---
function handleAuthAction() {
    const user = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();
    const error = document.getElementById('authError');

    if(!user || !pass) {
        error.innerText = "Please enter both fields"; 
        error.style.display = 'block'; 
        return;
    }

    let db = JSON.parse(localStorage.getItem('IGBIO_DB'));

    if (isSignupMode) {
        if (db[user]) {
            error.innerText = "Username exists!"; 
            error.style.display = 'block';
        } else {
            db[user] = { password: pass, progress: [] };
            localStorage.setItem('IGBIO_DB', JSON.stringify(db));
            loginUser(user);
            closeAuth();
        }
    } else {
        if (db[user] && db[user].password === pass) {
            loginUser(user);
            closeAuth();
        } else {
            error.innerText = "Invalid credentials"; 
            error.style.display = 'block';
        }
    }
}

function loginUser(username) {
    currentUser = username;
    localStorage.setItem('IGBIO_Session', username);
    
    document.getElementById('navAuthBtn').style.display = 'none';
    document.getElementById('userDashboard').style.display = 'flex';
    document.getElementById('welcomeMsg').innerText = `Welcome, ${username}!`;
    
    loadProgress();
}

function logout() {
    localStorage.removeItem('IGBIO_Session');
    location.reload();
}

// --- PROGRESS & CHECKBOX LOGIC ---
function handleCheckboxClick(event, checkbox, id) {
    // 1. Stop the click from reaching the <a> tag (Prevents page navigation)
    event.stopPropagation();

    // 2. Auth Check
    if(!currentUser) {
        alert("Please Sign In to save progress!");
        event.preventDefault(); // Stop the box from checking if not logged in
        openAuth();
        return;
    }

    // 3. Database Logic
    // Since we removed preventDefault(), the box IS ALREADY CHECKED visually by the browser.
    // We just need to save that state.
    
    let db = JSON.parse(localStorage.getItem('IGBIO_DB'));
    let userProgress = db[currentUser].progress || [];

    if(checkbox.checked) {
        if(!userProgress.includes(id)) userProgress.push(id);
    } else {
        userProgress = userProgress.filter(item => item !== id);
    }

    // 4. Save & Update UI
    db[currentUser].progress = userProgress;
    localStorage.setItem('IGBIO_DB', JSON.stringify(db));
    
    calculatePercent(userProgress);
}

function loadProgress() {
    let db = JSON.parse(localStorage.getItem('IGBIO_DB'));
    let userProgress = db[currentUser].progress || [];

    const checkboxes = document.querySelectorAll('.progress-check');
    checkboxes.forEach(box => {
        // Extract ID from onclick string (e.g., 'ch1')
        const id = box.getAttribute('onclick').split("'")[1]; 
        if(userProgress.includes(id)) {
            box.checked = true;
        } else {
            box.checked = false;
        }
    });

    calculatePercent(userProgress);
}

function calculatePercent(progressArray) {
    const total = document.querySelectorAll('.progress-check').length;
    const done = progressArray.length;
    const pct = total === 0 ? 0 : Math.round((done / total) * 100);

    document.getElementById('progressFill').style.width = pct + "%";
    document.getElementById('progressText').innerText = pct + "% Complete";
}

// --- SEARCH FILTERS ---
function filterChapters() {
    const input = document.getElementById('searchInput');
    const filter = input.value.toUpperCase();
    const grid = document.getElementById('grid');
    const cards = grid.getElementsByClassName('chapter-card');

    for (let i = 0; i < cards.length; i++) {
        let title = cards[i].getElementsByClassName('chapter-title')[0];
        let num = cards[i].getElementsByClassName('chapter-num')[0];
        if (title.innerText.toUpperCase().indexOf(filter) > -1 || num.innerText.toUpperCase().indexOf(filter) > -1) {
            cards[i].style.display = "flex";
        } else {
            cards[i].style.display = "none";
        }
    }
}

function filterTopics() {
    const input = document.getElementById('topicSearchInput');
    const filter = input.value.toUpperCase();
    const grid = document.getElementById('topicGrid');
    const cards = grid.getElementsByClassName('chapter-card');

    for (let i = 0; i < cards.length; i++) {
        let title = cards[i].getElementsByClassName('chapter-title')[0];
        if (title.innerText.toUpperCase().indexOf(filter) > -1) {
            cards[i].style.display = "flex";
        } else {
            cards[i].style.display = "none";
        }
    }
}

function filterGames() {
    const input = document.getElementById('gameSearchInput');
    const filter = input.value.toUpperCase();
    const grid = document.getElementById('gameGrid');
    const cards = grid.getElementsByClassName('chapter-card');

    for (let i = 0; i < cards.length; i++) {
        let title = cards[i].getElementsByClassName('chapter-title')[0];
        if (title.innerText.toUpperCase().indexOf(filter) > -1) {
            cards[i].style.display = "flex";
        } else {
            cards[i].style.display = "none";
        }
    }
}
    </script>

</body>
</html>












